---
  #
  # Organizations
  #
  - name: simple_report
    description: PRIME's POC testing app
    clients:
      - name: default
        topic: covid-19
        schema: primedatainput/pdi-covid-19
        format: CSV

  - name: strac
    description: STRAC POC testing app
    clients:
      - name: default
        topic: covid-19
        schema: strac/strac-covid-19
        format: CSV

  - name: az-phd
    description: Arizona PHD
    services:
      - name: elr-test
        topic: covid-19
        schema: az/az-covid-19
        jurisdictionalFilter:
          - matches(ordering_facility_state,AZ)
          - "doesNotMatch(ordering_facility_name,Tucson Mountains)"
        transforms: { deidentify: false }
        batch:
          operation: MERGE
          numberPerDay: 6 # Every 4 hours
          initialBatch: 00:00
          timeZone: ARIZONA
        format: CSV
        transports:
          - type: SFTP
            host: hssftp.azdhs.gov
            port: 22
            filePath: ./TEST/IN
      - name: elr-hl7-test
        topic: covid-19
        schema: az/az-covid-19-hl7
        jurisdictionalFilter:
          - matches(ordering_facility_state,AZ)
          - "doesNotMatch(ordering_facility_name,Tucson Mountains)"
        transforms: { deidentify: false }
        # Note: No 'batch:' here, so that step is skipped.   No delay either. Send happens instantly after translate.
        transports:
          - type: SFTP
            host: hssftp.azdhs.gov
            port: 22
            filePath: ./TEST/IN
        format: HL7
      - name: elr-prod
        topic: covid-19
        schema: az/az-covid-19
        jurisdictionalFilter:
          - matches(ordering_facility_state,AZ)
          - "matches(ordering_facility_name,Tucson Mountains)"
        transforms: { deidentify: false }
        batch:
          operation: MERGE
          numberPerDay: 6 # Every 4 hours
          initialBatch: 00:00
          timeZone: ARIZONA
        format: CSV
        transports:
          - type: SFTP
            host: hssftp.azdhs.gov
            port: 22
            filePath: ./PROD/IN

  - name: pima-az-phd
    description: Pima County, Arizona PHD
    services:
      - name: elr
        topic: covid-19
        schema: az/pima-az-covid-19
        jurisdictionalFilter: [ "filterByCounty(AZ, Pima)" ]
        transforms: { deidentify: false }
        batch:
          operation: MERGE
          numberPerDay: 1 # Once a day  NOTE:  In production, they want deliveries once a day at 8am MST.
          initialBatch: 08:00
          timeZone: ARIZONA
        format: CSV

  - name: fl-phd
    description: Florida Department of Health
    services:
      - name: elr
        topic: covid-19
        schema: fl/fl-covid-19
        jurisdictionalFilter: [ "matches(ordering_facility_state, FL)" ]
        transforms: { deidentify: false }
        format: CSV

#  - name: pa-phd
#    description: Pennsylvania Department of Health
#    services:
#      - name: elr-bucks-staging
#        topic: covid-19
#        schema: pa/pa-covid-19-redox
#        jurisdictionalFilter: [ "filterByCounty(PA, Bucks)" ]
#        transforms: { deidentify: false }
#        defaults:
#          processing_mode_code: T
#          redox_destination_id: e0d33443-c134-4e5f-9c15-69f9ba6340bf
#          redox_destination_name: "CDC Bucks County PDH Destination (s)"
#          redox_source_id: d89d4057-930f-4c5b-bb39-8cddb326e928
#          redox_source_name: "Prime Data Hub (Staging)"
#        format: REDOX
#        transports:
#          - type: REDOX
#            apiKey: 9e7f9bd1-a876-4f10-9d17-0833dc7bf60d # Redox staging
#      - name: elr-chester-staging
#        topic: covid-19
#        schema: pa/pa-covid-19-redox
#        jurisdictionalFilter: [ "filterByCounty(PA, Chester)" ]
#        transforms: { deidentify: false }
#        defaults:
#          processing_mode_code: T
#          redox_destination_id: 86aa61ac-8864-417f-860e-d83ae46c951f
#          redox_destination_name: "CDC Chester County PDH Destination (s)"
#          redox_source_id: d89d4057-930f-4c5b-bb39-8cddb326e928
#          redox_source_name: "Prime Data Hub (Staging)"
#        format: REDOX
#        transports:
#          - type: REDOX
#            apiKey: 9e7f9bd1-a876-4f10-9d17-0833dc7bf60d # Redox staging
#      - name: elr-chester-staging
#        topic: covid-19
#        schema: pa/pa-covid-19-redox
#        jurisdictionalFilter: [ "filterByCounty(PA, Montgomery)" ]
#        transforms: { deidentify: false }
#        defaults:
#          processing_mode_code: T
#          redox_destination_id: 21485dc8-8a6e-49d3-8b80-46531e015039
#          redox_destination_name: "CDC Montgomery County PDH Destination (s)"
#          redox_source_id: d89d4057-930f-4c5b-bb39-8cddb326e928
#          redox_source_name: "Prime Data Hub (Staging)"
#        format: REDOX
#        transports:
#          - type: REDOX
#            apiKey: 9e7f9bd1-a876-4f10-9d17-0833dc7bf60d # Redox staging
